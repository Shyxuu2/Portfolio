(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();const f=[{code:"§0",name:"black",fhex:"#000000"},{code:"§1",name:"dark_blue",fhex:"#0000AA"},{code:"§2",name:"dark_green",fhex:"#00AA00"},{code:"§3",name:"dark_aqua",fhex:"#00AAAA"},{code:"§4",name:"dark_red",fhex:"#AA0000"},{code:"§5",name:"dark_purple",fhex:"#AA00AA"},{code:"§6",name:"gold",fhex:"#FFAA00"},{code:"§7",name:"gray",fhex:"#AAAAAA"},{code:"§8",name:"dark_gray",fhex:"#555555"},{code:"§9",name:"blue",fhex:"#5555FF"},{code:"§a",name:"green",fhex:"#55FF55"},{code:"§b",name:"aqua",fhex:"#55FFFF"},{code:"§c",name:"red",fhex:"#FF5555"},{code:"§d",name:"light_purple",fhex:"#FF55FF"},{code:"§e",name:"yellow",fhex:"#FFFF55"},{code:"§f",name:"white",fhex:"#FFFFFF"}],y=[{code:"§k",name:"highlighted"},{code:"§l",name:"bold"},{code:"§m",name:"strikethrough"},{code:"§n",name:"underline"},{code:"§o",name:"italic"},{code:"§r",name:"reset"}],c={commands:{},commandToCode:{},reset:"§r",highlightColor:"#888888"},u={colorToPrefixMap:{},normalizedHighlightColor:""},p=t=>{if(!t||t==="transparent")return"";const e=document.createElement("div");e.style.color=t,document.body.appendChild(e);const o=getComputedStyle(e).color;return document.body.removeChild(e),o};function C(){b(),v(),E(),F(),u.normalizedHighlightColor=p(c.highlightColor)}function b(){const t={highlighted:"backColor",bold:"bold",strikethrough:"strikethrough",underline:"underline",italic:"italic"};y.forEach(e=>{if(e.name==="reset"){c.reset=e.code;return}const o=t[e.name];o&&(c.commands[e.code]={command:o,value:o==="backColor"?c.highlightColor:null,name:e.name},c.commandToCode[o]=e.code)}),f.forEach(e=>{c.commands[e.code]={command:"foreColor",value:e.fhex,name:e.name}})}function v(){const t=document.getElementById("color-buttons-container");if(!t)return;t.innerHTML="";for(const n of f){const r=document.createElement("div");r.className="relative group flex justify-center";const a=document.createElement("button");a.className="size-7 rounded-full border-2 border-semi-transparent hover:border-sky-400 transition-all ",a.style.backgroundColor=n.fhex,a.dataset.command="foreColor",a.dataset.value=n.fhex;const s=document.createElement("span");s.textContent=`${n.name} (${n.code})`,s.className=`
            absolute top-full mt-3 px-2 py-1             
            bg-slate-800 text-white text-sm rounded-md   
            whitespace-nowrap                               
            invisible opacity-0 scale-95                    
            transition-all                                  
            group-hover:visible group-hover:opacity-100 group-hover:scale-100
            pointer-events-none                             
        `,r.appendChild(a),r.appendChild(s),t.appendChild(r)}const e=document.createElement("div");e.className="relative group flex justify-center";const o=document.createElement("button");o.className="checkerboard-button checkerboard",o.dataset.command="resetFormatting";const i=document.createElement("span");i.textContent="Reset (§r)",i.className=`
        absolute top-full mt-3 px-2 py-1             
        bg-slate-800 text-white text-sm rounded-md   
        whitespace-nowrap                               
        invisible opacity-0 scale-95                    
        transition-all                                  
        group-hover:visible group-hover:opacity-100 group-hover:scale-100
        pointer-events-none                             
    `,e.appendChild(o),e.appendChild(i),t.appendChild(e)}function E(){for(const t of f)u.colorToPrefixMap[p(t.fhex)]=t.code}let h;function k(){const t=document.getElementById("copy-notification");t&&(clearTimeout(h),t.classList.remove("opacity-0","translate-y-4","pointer-events-none"),h=setTimeout(()=>{t.classList.add("opacity-0","translate-y-4","pointer-events-none")},3e3))}function F(){const t=document.getElementById("toolbar"),e=document.getElementById("editor"),o=document.getElementById("export-btn");t.addEventListener("click",T),o.addEventListener("click",L),e.addEventListener("keyup",m),e.addEventListener("mouseup",m),e.addEventListener("selectionchange",m)}function T(t){const e=t.target.closest("button");if(!e)return;const{command:o,value:i}=e.dataset;if(o){if(t.preventDefault(),document.getElementById("editor").focus(),o==="resetFormatting")document.execCommand("removeFormat",!1,null),document.execCommand("backColor",!1,"transparent");else if(o==="backColor"){const n=e.classList.contains("bg-slate-700");document.execCommand("backColor",!1,n?"transparent":c.highlightColor)}else document.execCommand(o,!1,i||null);m()}}function L(){const t=document.getElementById("editor"),e=document.getElementById("export-btn"),o=w(t),i=document.getElementById("export-container"),n=document.getElementById("export-output");if(n.textContent=o,i.classList.remove("hidden"),document.getElementById("editor").classList.remove("rounded-b-xl"),!navigator.clipboard){console.error("Clipboard API not available.");return}navigator.clipboard.writeText(o).then(()=>{k();const a=e.innerHTML;e.innerHTML=`
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
            </svg> 
            Copié!`,setTimeout(()=>{e.innerHTML=a},2e3)}).catch(a=>{console.error("Failed to copy text: ",a),alert("Failed to copy text. Please copy it manually from the box below.")})}function m(){Object.keys(c.commandToCode).forEach(t=>{const e=document.querySelector(`[data-command="${t}"]`);if(e){let o=!1;if(t==="backColor"){const i=document.queryCommandValue(t);o=p(i)===u.normalizedHighlightColor}else o=document.queryCommandState(t);e.classList.toggle("bg-slate-700",o),e.classList.toggle("text-sky-400",o)}})}let l={output:"",activePrefixes:new Set};function w(t){l={output:"",activePrefixes:new Set};for(const e of t.childNodes)x(e);return l.output.startsWith(c.reset)&&l.output.length===c.reset.length?"":l.output}function x(t){if(t.nodeType===Node.TEXT_NODE){const o=t.textContent;let i=l.activePrefixes;g(t.parentElement);for(const n of o){const r=g(t.parentElement),a=new Set([...r].filter(d=>!i.has(d)));new Set([...i].filter(d=>!r.has(d))).size>0?l.output+=c.reset+Array.from(r).sort().join(""):a.size>0&&(l.output+=Array.from(a).sort().join("")),l.output+=n,i=new Set(r)}l.activePrefixes=i;return}if(t.nodeType!==Node.ELEMENT_NODE)return;getComputedStyle(t).display==="block"&&l.output.length>0&&!l.output.endsWith(`
`)&&(l.output+=`
`),t.tagName==="BR"&&(l.output.endsWith(`
`)||(l.output+=`
`));for(const o of t.childNodes)x(o)}function g(t){const e=new Set;let o=t;for(;o&&o.nodeType===Node.ELEMENT_NODE;){const i=getComputedStyle(o),n=i.getPropertyValue("font-weight");(n==="bold"||parseInt(n)>=700)&&e.add(c.commandToCode.bold),i.getPropertyValue("font-style")==="italic"&&e.add(c.commandToCode.italic);const r=i.getPropertyValue("text-decoration-line")?.toLowerCase()||"",a=i.getPropertyValue("text-decoration")?.toLowerCase()||"",s=(r+" "+a).split(/\s+/);s.includes("underline")&&e.add(c.commandToCode.underline),s.includes("line-through")&&e.add(c.commandToCode.strikethrough);const d=i.getPropertyValue("color");(o.style.color||o.getAttribute("color")||o.classList?.length>0)&&u.colorToPrefixMap[d]&&e.add(u.colorToPrefixMap[d]),p(o.style.backgroundColor)===u.normalizedHighlightColor&&e.add(c.commandToCode.backColor),o=o.parentElement}return e}document.addEventListener("DOMContentLoaded",C);
