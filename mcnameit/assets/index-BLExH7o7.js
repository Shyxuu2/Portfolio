(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();const f=[{code:"§0",name:"black",fhex:"#000000"},{code:"§1",name:"dark_blue",fhex:"#0000AA"},{code:"§2",name:"dark_green",fhex:"#00AA00"},{code:"§3",name:"dark_aqua",fhex:"#00AAAA"},{code:"§4",name:"dark_red",fhex:"#AA0000"},{code:"§5",name:"dark_purple",fhex:"#AA00AA"},{code:"§6",name:"gold",fhex:"#FFAA00"},{code:"§7",name:"gray",fhex:"#AAAAAA"},{code:"§8",name:"dark_gray",fhex:"#555555"},{code:"§9",name:"blue",fhex:"#5555FF"},{code:"§a",name:"green",fhex:"#55FF55"},{code:"§b",name:"aqua",fhex:"#55FFFF"},{code:"§c",name:"red",fhex:"#FF5555"},{code:"§d",name:"light_purple",fhex:"#FF55FF"},{code:"§e",name:"yellow",fhex:"#FFFF55"},{code:"§f",name:"white",fhex:"#FFFFFF"}],C=[{code:"§k",name:"highlighted"},{code:"§l",name:"bold"},{code:"§m",name:"strikethrough"},{code:"§n",name:"underline"},{code:"§o",name:"italic"},{code:"§r",name:"reset"}],d={commands:{},commandToCode:{},reset:"§r",highlightColor:"#888888"},u={colorToPrefixMap:{},normalizedHighlightColor:""},p=t=>{if(!t||t==="transparent")return"";const e=document.createElement("div");e.style.color=t,document.body.appendChild(e);const o=getComputedStyle(e).color;return document.body.removeChild(e),o};function b(){E(),v(),L(),k(),u.normalizedHighlightColor=p(d.highlightColor)}function E(){const t={highlighted:"backColor",bold:"bold",strikethrough:"strikethrough",underline:"underline",italic:"italic"};C.forEach(e=>{if(e.name==="reset"){d.reset=e.code;return}const o=t[e.name];o&&(d.commands[e.code]={command:o,value:o==="backColor"?d.highlightColor:null,name:e.name},d.commandToCode[o]=e.code)}),f.forEach(e=>{d.commands[e.code]={command:"foreColor",value:e.fhex,name:e.name}})}function v(){const t=document.getElementById("color-dropdown-menu");if(!t)return;t.innerHTML="";const e=(a,n)=>{const r=document.createElement("div");r.className="relative group flex justify-center";const c=document.createElement("button");c.className="size-7 rounded-full border-2 border-semi-transparent hover:border-sky-400 transition-all",c.style.backgroundColor=a.fhex,c.dataset.command="foreColor",c.dataset.value=a.fhex;const i=document.createElement("span");return i.textContent=`${a.name} (${a.code})`,i.className=`tooltip
            absolute top-full mt-3 px-2 py-1
            bg-slate-800 text-white text-sm rounded-md
            whitespace-nowrap
            invisible opacity-0 scale-95
            transition-all
            group-hover:visible group-hover:opacity-100 group-hover:scale-100
            pointer-events-none
        `,n%4===0&&(i.style.transform="translateX(20px)"),r.appendChild(i),r.appendChild(c),r},o=()=>{const a=document.createElement("div");a.className="relative group flex justify-center";const n=document.createElement("button");n.className="checkerboard-button checkerboard",n.dataset.command="resetFormatting";const r=document.createElement("span");return r.textContent="Reset (§r)",r.className=`tooltip
            absolute top-full mt-3 px-2 py-1
            bg-slate-800 text-white text-sm rounded-md
            whitespace-nowrap
            invisible opacity-0 scale-95
            transition-all
            group-hover:visible group-hover:opacity-100 group-hover:scale-100
            pointer-events-none
        `,a.appendChild(r),a.appendChild(n),a};f.forEach((a,n)=>{t.appendChild(e(a,n))}),t.appendChild(o())}function L(){for(const t of f)u.colorToPrefixMap[p(t.fhex)]=t.code}function x(t){const e=document.getElementById("notification");e.textContent=t,e.classList.remove("opacity-0"),e.classList.add("opacity-100"),setTimeout(()=>{e.classList.remove("opacity-100"),e.classList.add("opacity-0")},2e3)}function k(){const t=document.getElementById("toolbar"),e=document.getElementById("editor"),o=document.getElementById("export-btn"),a=document.getElementById("copy-export-btn"),n=document.getElementById("color-dropdown-btn"),r=document.getElementById("color-dropdown-menu");a.addEventListener("click",()=>{const i=document.getElementById("export-output").textContent;navigator.clipboard.writeText(i).then(()=>{x("Copié dans le presse papier !")}).catch(s=>{console.error("Erreur lors de la copie : ",s),alert("Impossible de copier. Copie manuelle requise.")})}),t.addEventListener("click",g),o.addEventListener("click",w),e.addEventListener("keyup",m),e.addEventListener("mouseup",m),e.addEventListener("selectionchange",m),n.addEventListener("click",i=>{i.stopPropagation(),r.classList.toggle("hidden")}),r.addEventListener("click",i=>{g(i),r.classList.add("hidden")}),window.addEventListener("click",i=>{!n.contains(i.target)&&!r.contains(i.target)&&r.classList.add("hidden")}),!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||document.querySelectorAll(".tooltip").forEach(s=>{s.style.display="none"})}function g(t){const e=t.target.closest("button");if(!e)return;const{command:o,value:a}=e.dataset;if(o){if(t.preventDefault(),document.getElementById("editor").focus(),o==="resetFormatting")document.execCommand("removeFormat",!1,null),document.execCommand("backColor",!1,"transparent");else if(o==="backColor"){const n=e.classList.contains("bg-slate-700");document.execCommand("backColor",!1,n?"transparent":d.highlightColor)}else document.execCommand(o,!1,a||null);m()}}function w(){const t=document.getElementById("editor"),e=document.getElementById("export-btn"),o=B(t),a=o.replace(/§/g,"§").replace(/\n/g,`
`),n=document.getElementById("export-container"),r=document.getElementById("export-output");if(n.dataset.standard=o,n.dataset.motd=a,n.dataset.current="standard",r.textContent=o,n.classList.remove("hidden"),document.getElementById("editor").classList.remove("rounded-b-xl"),!navigator.clipboard){console.error("Clipboard API not available.");return}navigator.clipboard.writeText(o).then(()=>{x("Copié automatiquement dans le presse papier !");const i=e.innerHTML;e.innerHTML=`
        <i class="fa-solid fa-check"></i> 
        Copié!`,setTimeout(()=>{e.innerHTML=i},2e3)}).catch(i=>{console.error("Failed to copy text: ",i),alert("Failed to copy text. Please copy it manually from the box below.")})}editor.addEventListener("paste",t=>{t.preventDefault();const e=(t.clipboardData||window.clipboardData).getData("text/plain");document.execCommand("insertText",!1,e)});document.getElementById("toggle-standard").addEventListener("click",()=>{const t=document.getElementById("export-container"),e=document.getElementById("export-output");e.textContent=t.dataset.standard,t.dataset.current="standard"});document.getElementById("toggle-motd").addEventListener("click",()=>{const t=document.getElementById("export-container"),e=document.getElementById("export-output");e.textContent=t.dataset.motd,t.dataset.current="motd"});function m(){Object.keys(d.commandToCode).forEach(t=>{const e=document.querySelector(`[data-command="${t}"]`);if(e){let o=!1;if(t==="backColor"){const a=document.queryCommandValue(t);o=p(a)===u.normalizedHighlightColor}else o=document.queryCommandState(t);e.classList.toggle("bg-slate-700",o),e.classList.toggle("text-sky-400",o)}})}let l={output:"",activePrefixes:new Set};function B(t){l={output:"",activePrefixes:new Set};for(const e of t.childNodes)y(e);return l.output.startsWith(d.reset)&&l.output.length===d.reset.length?"":l.output}function y(t){if(t.nodeType===Node.TEXT_NODE){if(t.textContent.trim()==="")return;const o=t.textContent;let a=l.activePrefixes;h(t.parentElement);for(const n of o){const r=h(t.parentElement),c=new Set([...r].filter(s=>!a.has(s)));new Set([...a].filter(s=>!r.has(s))).size>0?l.output+=d.reset+Array.from(r).sort().join(""):c.size>0&&(l.output+=Array.from(c).sort().join("")),l.output+=n,a=new Set(r)}l.activePrefixes=a;return}if(t.nodeType!==Node.ELEMENT_NODE)return;getComputedStyle(t).display==="block"&&l.output.length>0&&!l.output.endsWith(`
`)&&(l.output+=`
`),t.tagName==="BR"&&(l.output.endsWith(`
`)||(l.output+=`
`));for(const o of t.childNodes)y(o)}function h(t){const e=new Set;let o=t;for(;o&&o.nodeType===Node.ELEMENT_NODE;){const a=getComputedStyle(o),n=a.getPropertyValue("font-weight");(n==="bold"||parseInt(n)>=700)&&e.add(d.commandToCode.bold),a.getPropertyValue("font-style")==="italic"&&e.add(d.commandToCode.italic);const r=a.getPropertyValue("text-decoration-line")?.toLowerCase()||"",c=a.getPropertyValue("text-decoration")?.toLowerCase()||"",i=(r+" "+c).split(/\s+/);i.includes("underline")&&e.add(d.commandToCode.underline),i.includes("line-through")&&e.add(d.commandToCode.strikethrough);const s=a.getPropertyValue("color");(o.style.color||o.getAttribute("color")||o.classList?.length>0)&&u.colorToPrefixMap[s]&&e.add(u.colorToPrefixMap[s]),p(o.style.backgroundColor)===u.normalizedHighlightColor&&e.add(d.commandToCode.backColor),o=o.parentElement}return e}document.addEventListener("DOMContentLoaded",b);
