(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function o(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=o(n);fetch(n.href,a)}})();const m=[{code:"§0",name:"black",fhex:"#000000"},{code:"§1",name:"dark_blue",fhex:"#0000AA"},{code:"§2",name:"dark_green",fhex:"#00AA00"},{code:"§3",name:"dark_aqua",fhex:"#00AAAA"},{code:"§4",name:"dark_red",fhex:"#AA0000"},{code:"§5",name:"dark_purple",fhex:"#AA00AA"},{code:"§6",name:"gold",fhex:"#FFAA00"},{code:"§7",name:"gray",fhex:"#AAAAAA"},{code:"§8",name:"dark_gray",fhex:"#555555"},{code:"§9",name:"blue",fhex:"#5555FF"},{code:"§a",name:"green",fhex:"#55FF55"},{code:"§b",name:"aqua",fhex:"#55FFFF"},{code:"§c",name:"red",fhex:"#FF5555"},{code:"§d",name:"light_purple",fhex:"#FF55FF"},{code:"§e",name:"yellow",fhex:"#FFFF55"},{code:"§f",name:"white",fhex:"#FFFFFF"}],h=[{code:"§k",name:"highlighted"},{code:"§l",name:"bold"},{code:"§m",name:"strikethrough"},{code:"§n",name:"underline"},{code:"§o",name:"italic"},{code:"§r",name:"reset"}],i={commands:{},commandToCode:{},reset:"§r",highlightColor:"#888888"},l={colorToPrefixMap:{},normalizedHighlightColor:""},u=t=>{if(!t||t==="transparent")return"";const e=document.createElement("div");e.style.color=t,document.body.appendChild(e);const o=getComputedStyle(e).color;return document.body.removeChild(e),o};function g(){y(),x(),C(),v(),l.normalizedHighlightColor=u(i.highlightColor)}function y(){const t={highlighted:"backColor",bold:"bold",strikethrough:"strikethrough",underline:"underline",italic:"italic"};h.forEach(e=>{if(e.name==="reset"){i.reset=e.code;return}const o=t[e.name];o&&(i.commands[e.code]={command:o,value:o==="backColor"?i.highlightColor:null,name:e.name},i.commandToCode[o]=e.code)}),m.forEach(e=>{i.commands[e.code]={command:"foreColor",value:e.fhex,name:e.name}})}function x(){const t=document.getElementById("color-buttons-container");if(t){t.innerHTML="";for(const e of m){const o=document.createElement("div");o.className="relative group flex justify-center";const r=document.createElement("button");r.className="size-7 rounded-full border-2 border-transparent hover:border-sky-400 transition-all",r.style.backgroundColor=e.fhex,r.dataset.command="foreColor",r.dataset.value=e.fhex;const n=document.createElement("span");n.textContent=`${e.name} (${e.code})`,n.className=`
            absolute top-full mt-3 px-2 py-1             
            bg-slate-800 text-white text-sm rounded-md   
            whitespace-nowrap                               
            invisible opacity-0 scale-95                    
            transition-all                                  
            group-hover:visible group-hover:opacity-100 group-hover:scale-100
            pointer-events-none                             
        `,o.appendChild(r),o.appendChild(n),t.appendChild(o)}}}function C(){for(const t of m)l.colorToPrefixMap[u(t.fhex)]=t.code}let f;function b(){const t=document.getElementById("copy-notification");t&&(clearTimeout(f),t.classList.remove("opacity-0","translate-y-4","pointer-events-none"),f=setTimeout(()=>{t.classList.add("opacity-0","translate-y-4","pointer-events-none")},3e3))}function v(){const t=document.getElementById("toolbar"),e=document.getElementById("editor"),o=document.getElementById("export-btn");t.addEventListener("click",E),o.addEventListener("click",k),e.addEventListener("keyup",s),e.addEventListener("mouseup",s),e.addEventListener("selectionchange",s)}function E(t){const e=t.target.closest("button");if(!e)return;const{command:o,value:r}=e.dataset;if(o){if(t.preventDefault(),document.getElementById("editor").focus(),o==="backColor"){const n=e.classList.contains("bg-slate-700");document.execCommand("backColor",!1,n?"transparent":i.highlightColor)}else document.execCommand(o,!1,r||null);s()}}function k(){const t=document.getElementById("editor"),e=document.getElementById("export-btn"),o=F(t),r=document.getElementById("export-container"),n=document.getElementById("export-output");if(n.textContent=o,r.classList.remove("hidden"),!navigator.clipboard){console.error("Clipboard API not available.");return}navigator.clipboard.writeText(o).then(()=>{b();const a=e.innerHTML;e.innerHTML=`
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
            </svg> 
            Copied!`,setTimeout(()=>{e.innerHTML=a},2e3)}).catch(a=>{console.error("Failed to copy text: ",a),alert("Failed to copy text. Please copy it manually from the box below.")})}function s(){Object.keys(i.commandToCode).forEach(t=>{const e=document.querySelector(`[data-command="${t}"]`);if(e){let o=!1;if(t==="backColor"){const r=document.queryCommandValue(t);o=u(r)===l.normalizedHighlightColor}else o=document.queryCommandState(t);e.classList.toggle("bg-slate-700",o),e.classList.toggle("text-sky-400",o)}})}function T(t,e){if(t.size!==e.size)return!1;for(const o of t)if(!e.has(o))return!1;return!0}let c={output:"",activePrefixes:new Set};function F(t){c={output:"",activePrefixes:new Set};for(const e of t.childNodes)p(e);return c.output.startsWith(i.reset)&&c.output.length===i.reset.length?"":c.output}function p(t){if(t.nodeType===Node.TEXT_NODE){const o=A(t.parentElement);if(!T(c.activePrefixes,o)){let r="";o.size>0?r=i.reset+Array.from(o).sort().join(""):c.activePrefixes.size>0&&(r=i.reset),c.output+=r,c.activePrefixes=o}c.output+=t.textContent;return}if(t.nodeType!==Node.ELEMENT_NODE)return;getComputedStyle(t).display==="block"&&c.output.length>0&&!c.output.endsWith(`
`)&&(c.output+=`
`),t.tagName==="BR"&&(c.output.endsWith(`
`)||(c.output+=`
`));for(const o of t.childNodes)p(o)}function A(t){const e=new Set;if(!t||t.nodeType!==Node.ELEMENT_NODE)return e;const o=getComputedStyle(t),r=o.getPropertyValue("font-weight");(r==="bold"||parseInt(r)>=700)&&e.add(i.commandToCode.bold),o.getPropertyValue("font-style")==="italic"&&e.add(i.commandToCode.italic),o.getPropertyValue("text-decoration-line").includes("underline")&&e.add(i.commandToCode.underline),o.getPropertyValue("text-decoration-line").includes("line-through")&&e.add(i.commandToCode.strikethrough);const n=o.getPropertyValue("color");return l.colorToPrefixMap[n]&&e.add(l.colorToPrefixMap[n]),u(t.style.backgroundColor)===l.normalizedHighlightColor&&e.add(i.commandToCode.backColor),new Set(Array.from(e).filter(d=>d))}document.addEventListener("DOMContentLoaded",g);
